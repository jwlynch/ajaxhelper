<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Ajax Helper</title>
  <style>body { font-family:arial; }</style>
</head>
<body>
<h1>Ajax Helper</h1>
Hamilton G. Chua (ham@solutiongrove.com)<br>
January 2006<br>
v0.1d<br>
<br>
<span style="font-weight: bold;">Components :</span><br>
Prototype v1.4.0 (<a href="http://prototype.conio.net/">http://prototype.conio.net/</a>)<br>
Scriptaculous v1.5.1 (<a href="http://script.aculo.us/">http://script.aculo.us/</a>)<br>
Rico v1.1.0 (<a href="http://www.openrico.org">http://www.openrico.org</a>)<br>
Overlibmws (<a href="http://www.macridesweb.com/oltest/">http://www.macridesweb.com/oltest/</a>)<br>
Extracted Rounder Functions from Rico<br>
(<a
 href="http://encytemedia.com/blog/articles/2005/12/01/rico-rounded-corners-without-all-of-rico">http://encytemedia.com/blog/articles/2005/12/01/rico-rounded-corners-without-all-of-rico</a>)<br>
<br>
<span style="font-weight: bold;">Introduction :<br>
<br>
</span>The Ajax Helper package provides TCL API to generate the
javascript from the above components to enable their various features
for use in OpenACS applications.
The motivation for this package is to easily enable Web 2.0 like
features in OpenACS applications using the most popular javascript
library prototype.js and it's derivatives like Scriptaculous and Rico.<br>
<br>
<span style="font-weight: bold;">Prerequisites :<br>
<br>
</span>The ajax helper package must be installed and mounted in /ajax
to be able ot use these features. The installer should automatically
mount the ajax helper in /ajax.<span style="font-weight: bold;"><br>
</span><br>
<span style="font-weight: bold;">Javascript Sources :</span><br>
<br>
The javascript files from prototype and scriptaculous must be declared
in the &lt; head &gt; section of an html page. In the case of OpenACS
applications that use the templating system, the sources must be
declared in the blank-master.adp file. <br>
<br>
To have the ajax helper generate
the javascript declaration ....<br>
<br>
TCL File (blank-master.tcl) :<br>
<br>
&nbsp;&nbsp;&nbsp; set ah_sources [ah::js_sources -default]<br>
<br>
ADP File (blank-master.adp):<br>
<br>
&nbsp;&nbsp;&nbsp; @ah_sources;noquote@<br>
<br>
Compiled Template:<br>
<pre id="line1">&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/prototype/prototype.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt; <br>&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/scriptaculous/builder.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt; <br>&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/scriptaculous/controls.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt; <br>&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/scriptaculous/dragdrop.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt; <br>&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/scriptaculous/effects.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt; <br>&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/scriptaculous/slider.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt; <br></pre>
<pre id="line11">&lt;<span class="start-tag">script</span><span
 class="attribute-name"> type</span>=<span class="attribute-value">"text/javascript" </span><span
 class="attribute-name">src</span>=<span class="attribute-value">"/ajax/scriptaculous/scriptaculous.js"</span>&gt;&lt;/<span
 class="end-tag">script</span>&gt;<br><br></pre>
The above TCL API generates the <span style="font-style: italic;">default</span>
sources that must be declared for you to be able to use the javascript
effects. Ajax Helper has support for overlibmws (DHTML callouts) and
RICO (other cinematic effects) in addition to scriptaculous. <br>
<br>
To generate the javascript sources for Rico :<br>
<br>
&nbsp;&nbsp;&nbsp; set ah_sources [ah::js_sources -source "rico"]<br>
<br>
To generate the javscript sources for Overlibmws :<br>
<br>
&nbsp;&nbsp;&nbsp; set ah_sources [ah::js_sources -source "overlibmws"]<br>
<br>
The functions that are responsible for rounded corners has been
extracted into rounded.js to work with scriptaculous. <br>
To use these functions wihtout using all of rico.js<br>
<br>
&nbsp;&nbsp;&nbsp; set ah_sources [ah::js_sources -source "rounder"]<br>
<br>
NOTE :<br>
<br>
You can combine sources by doing something like this<br>
<br>
&nbsp;&nbsp;&nbsp; set ah_sources [ah::js_sources -default]<br>
&nbsp;&nbsp;&nbsp; append ah_sources [ah::js_sources -source
"overlibmws"]<br>
<br>
The above code will generate the overlibmws javascript source
declaration with the default declarations.<br>
<br>
Overlibmws and the default sources (Scriptaculous) are compatible with
each other. It is not advisable to use both Scriptaculous and Rico at
the same time.<br>
<br>
<span style="font-weight: bold;">Ajax Procedures :<br>
<br>
</span>Scriptaculous has a pair of javascript functions that alllow
programmers to use XMLHTTP. The ajax.updater and ajax.request
functions. See <a
 href="http://wiki.script.aculo.us/scriptaculous/show/Ajax.Updater">http://wiki.script.aculo.us/scriptaculous/show/Ajax.Updater</a>
and <a
 href="http://wiki.script.aculo.us/scriptaculous/show/Ajax.Request">http://wiki.script.aculo.us/scriptaculous/show/Ajax.Request</a>
for more informaiton about the scriptaculous functions.<br>
<br>
The TCL API is used like this<br>
<br>
&nbsp;&nbsp;&nbsp; set request [ah::ajaxrequest -url "/url/to/call"
-pars "parameter1=parameter_value&amp;parameter1=parameter_value"
-options "asynchronous:true" ]<br>
<br>
The above api will generate an ajax.request javascript function that is
best placed in a javascript event.<br>
<br>
&nbsp;&nbsp;&nbsp; &lt;a href="#" onClick="@request;noquote@"&gt;<br>
<br>
<br>
<br>
<br>
<br>
<span style="font-weight: bold;"></span><br>
</body>
</html>
